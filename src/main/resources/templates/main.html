<!-- templates/home.html -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ê·¸ë‹ˆ ë§ˆì¼“</title>

    <!-- CSRF (ì„¸ì…˜ ê¸°ë°˜ Security) -->
    <meta name="_csrf_parameter" th:content="${_csrf.parameterName}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <meta name="_csrf" th:content="${_csrf.token}" />

    <style>
        :root{
            --bg1:#fff7ed; --bg2:#fde7d8; --bg3:#fae8ff;
            --card:#fffaf5; --ink:#443c33; --muted:#7a6f66;
            --accent1:#f4a261; --accent2:#e76f51;
            --ring:rgba(244,162,97,.35);
            --radius:18px; --shadow:0 20px 45px rgba(68,60,51,.18);
        }
        *{box-sizing:border-box}
        html,body{height:100%}
        body{
            margin:0; color:var(--ink);
            font-family:ui-sans-serif, system-ui, -apple-system,"Segoe UI",Roboto,"Noto Sans KR",Arial,"Apple SD Gothic Neo";
            background:
                    radial-gradient(1200px 700px at 80% 10%, var(--bg3) 0%, transparent 60%),
                    radial-gradient(900px 600px at 10% 90%, var(--bg2) 0%, transparent 60%),
                    linear-gradient(180deg, var(--bg1), #fff);
            padding:24px;
        }
        .container{max-width:1080px; margin:0 auto}
        .card{
            background:var(--card); border-radius:var(--radius);
            box-shadow:var(--shadow); padding:20px 18px; position:relative; overflow:hidden;
            animation:fade .3s ease;
        }
        @keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}
        header{
            display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:14px;
        }
        .brand{display:flex; align-items:center; gap:12px}
        .badge{
            width:44px; height:44px; border-radius:14px; flex:none;
            background:conic-gradient(from 210deg, #ffd7ba, #f7b267, #e76f51, #ffd7ba);
            display:grid; place-items:center; color:#fff; font-weight:800; letter-spacing:.4px;
            box-shadow:0 10px 20px rgba(231,111,81,.28);
        }
        h1{margin:0; font-size:22px; letter-spacing:-.2px}
        .pill{
            padding:6px 10px; border-radius:999px; background:#fff; border:1px solid #eadfd6;
            font-size:12px; color:#7b6f66;
        }
        nav.tabs{
            display:flex; gap:8px; margin:10px 0 4px; flex-wrap:wrap;
        }
        .tab{
            padding:10px 14px; border-radius:12px; cursor:pointer; user-select:none;
            background:#fff; border:1px solid #eadfd6; color:#6e6259; font-weight:600;
        }
        .tab.active{
            background:linear-gradient(135deg,var(--accent1),var(--accent2)); color:#fff; border-color:transparent;
            box-shadow:0 10px 20px rgba(231,111,81,.25);
        }

        /* ê³µí†µ UI */
        .btn{
            appearance:none; border:0; cursor:pointer;
            padding:10px 14px; border-radius:12px; color:white; font-weight:700;
            background:linear-gradient(135deg, var(--accent1), var(--accent2));
            box-shadow:0 10px 20px rgba(231,111,81,.3), 0 2px 6px rgba(0,0,0,.06);
            transition:transform .05s ease, filter .2s ease;
        }
        .btn:hover{filter:saturate(1.05) brightness(1.02)}
        .btn:active{transform:translateY(1px)}
        .btn.muted{background:linear-gradient(135deg,#b8b8b8,#7d7d7d)}
        .input, select{
            width:100%; padding:10px 12px; border-radius:12px; border:1px solid #e8ded5; background:#fff;
            color:var(--ink); outline:none; transition:border-color .15s, box-shadow .15s;
        }
        .input:focus, select:focus{border-color:#f4a261; box-shadow:0 0 0 6px var(--ring)}
        .hint{color:var(--muted); font-size:12px}
        table{width:100%; border-collapse:separate; border-spacing:0 8px}
        th,td{padding:10px 12px; text-align:left; font-size:14px}
        thead th{color:#7a6f66; font-weight:700}
        /*tbody tr{background:#fff; border:1px solid #eadfd6; border-radius:12px}*/
        tbody tr{background: var(--card); border:1px solid #eadfd6; border-radius:12px}
        tbody tr td:first-child{border-top-left-radius:12px; border-bottom-left-radius:12px}
        tbody tr td:last-child{border-top-right-radius:12px; border-bottom-right-radius:12px}

        .cart-link { position: relative; display:inline-flex; align-items:center; }
        .cartbadge {
          position:absolute; top:-6px; right:-10px;
          min-width:18px; height:18px; padding:0 5px;
          border-radius:999px; font-size:12px; line-height:18px;
          background:#ff5252; color:#fff; text-align:center;
          transform:scale(1); transition:transform .2s ease;
        }
        .cartbadge.bump { transform:scale(1.2); }

        /* ìƒí’ˆ ê·¸ë¦¬ë“œ */
        /* ìƒí’ˆ ì¹´ë“œ ê°„ ê°„ê²©ì„ ì¡°ê¸ˆ ë” */
        .grid{ gap:20px; }

        /* ì¹´ë“œ ëŒ€ë¹„/ë¶„ë¦¬ê° ê°•í™” */
        .product{
            position:relative;
            /*background:linear-gradient(180deg, #fff, #fffdf8); !* ë°°ê²½ ì‚´ì§ í‹´íŠ¸ *!*/
            background: var(--card);
            border:1.5px solid #eadfd6;            /* í…Œë‘ë¦¬ ë‘ê»˜ â†‘ */
            border-radius:14px;
            padding:16px;                          /* ë‚´ë¶€ ì—¬ë°± â†‘ */
            box-shadow:0 8px 18px rgba(68,60,51,.08);
            transition:transform .12s ease, box-shadow .2s ease, border-color .2s ease;
        }

        /* ì¹´ë“œ í˜¸ë²„ ì‹œ ë¯¸ì„¸ ë¦¬í”„íŠ¸ + ê°•ì¡° */
        .product:hover{
            transform:translateY(-2px);
            box-shadow:0 14px 30px rgba(68,60,51,.14);
            border-color:#f1c7a1;                  /* accent í†¤ìœ¼ë¡œ ì‚´ì§ ê°•ì¡° */
        }

        /* ì œëª©ì´ ê¸¸ì–´ë„ ìì—°ìŠ¤ëŸ½ê²Œ ì¤„ë°”ê¿ˆ */
        .product h3{ overflow-wrap:anywhere; }

        /* ê°€ê²© ì•„ë˜ì— ì€ì€í•œ êµ¬ë¶„ì„  */
        .price{ position:relative; padding-bottom:6px; margin-bottom:10px; }
        .price::after{
            content:""; position:absolute; left:0; right:0; bottom:-6px; height:1px;
            background:linear-gradient(90deg, transparent, #eadfd6, transparent);
        }

        /* ì•¡ì…˜ ì¤„(ìˆ˜ëŸ‰/ë²„íŠ¼) ì—¬ìœ  */
        .product-actions{
            display:grid;
            grid-template-columns: 1fr auto auto;
            gap:12px; align-items:center;
        }
        .product-actions .btn{ white-space:nowrap; min-width:118px; }
        .product-actions .qty input{ width:100px; text-align:right; }

        /* (ì˜µì…˜) ì™¼ìª½ ì–‡ì€ ìƒ‰ ë ë¡œ ë” ë˜ë ·í•˜ê²Œ êµ¬ë¶„í•˜ê³  ì‹¶ìœ¼ë©´ ì£¼ì„ í•´ì œ
        .product::before{
          content:""; position:absolute; left:0; top:0; bottom:0; width:4px;
          background:linear-gradient(180deg, var(--accent1), var(--accent2));
          opacity:.5; border-top-left-radius:14px; border-bottom-left-radius:14px;
        }
        */

        .price{font-weight:800}
        /* 1) ê²€ìƒ‰ì°½ + ë¡œê·¸ì•„ì›ƒ íˆ´ë°” */
        .toolbar{display:flex; gap:10px; align-items:center; margin:8px 0 14px;}
        .toolbar .input{flex:1; width:auto; min-width:0;} /* flexì—ì„œ 100% ëŒ€ì‹  flex:1 */
        /* 2) ìƒí’ˆ ì¹´ë“œ ì•¡ì…˜ í–‰ */
        /*.row{display:grid; grid-template-columns: 1fr 110px 110px; gap:10px; align-items:center}*/
        /*.qty{display:flex; gap:8px; align-items:center}*/
        /*.qty input{width:76px; text-align:right}*/
        .row{
            display:grid;
            grid-template-columns: minmax(150px,1fr) 128px 128px; /* ë²„íŠ¼ ì¹¼ëŸ¼ ì—¬ìœ  â†‘ */
            gap:10px; align-items:center;
        }
        .row .btn{width:100%; white-space:nowrap;}  /* ê¸€ì ì¤„ë°”ê¿ˆ ë°©ì§€ + ì¹¼ëŸ¼ ê°€ë“ */
        .qty input{width:100%; text-align:right;}   /* qty í•„ë“œ ì¹¼ëŸ¼ ê½‰ ì°¨ê²Œ */

        /*ì£¼ë¬¸ë‚´ì—­*/
        .toolbar .form-inline{
            display:flex;
            align-items:center;
            gap:10px;
            flex-wrap:nowrap; /* í•­ìƒ ì¼ë ¬ ìœ ì§€(ëª¨ë°”ì¼ì—ì„  wrapìœ¼ë¡œ ë°”ê¾¸ê³  ì‹¶ìœ¼ë©´ wrapìœ¼ë¡œ) */
        }

        /* ì¸í’‹ì€ ê°€ë³€í­ìœ¼ë¡œ */
        .toolbar .form-inline .input{
            flex: 1 1 320px;
            min-width: 240px;
        }

        /* ì…€ë ‰íŠ¸ ìµœì†Œí­ */
        .toolbar select.form-control{
            min-width: 140px;
        }

        /* ë²„íŠ¼ ë†’ì´/ì¤„ë°”ê¿ˆ ë°©ì§€ */
        .toolbar .form-inline .btn{
            white-space: nowrap;
            height: 36px;
            line-height: 36px;
            padding: 0 12px;
        }

        /* ë ˆì´ì•„ì›ƒ */
        .section{display:none; margin-top:12px}
        .section.active{display:block}

        @media (max-width:980px){
            .grid{grid-template-columns: repeat(2, minmax(0,1fr))}
            .row{grid-template-columns:1fr 100px 100px}
        }
        @media (max-width:640px){
            .grid{grid-template-columns: 1fr}
            .row{grid-template-columns:1fr; gap:8px}
            nav.tabs{gap:6px}
        }

        /* ë‹¤í¬ ëª¨ë“œ ë³´ì™„ */
        @media (prefers-color-scheme: dark){
            body{background:linear-gradient(180deg,#1b1917,#26211d)}
            .card{background:#201d1a; color:#f1eee9}
            .product{ background:#201d1a; }
            .input, select{background:#161412; border-color:#39322c; color:#f1eee9}
            .tab{background:#161412; border-color:#39322c; color:#d9d4cf}
            thead th{color:#bfb4a9}
            /*tbody tr{background:#161412; border-color:#39322c}*/
            tbody tr{ background:#161412; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="card">
        <header>
            <div class="brand">
                <div class="badge">GM</div>
                <div>
                    <h1>ì•ˆë…•í•˜ì„¸ìš”, <span th:text="${#authentication.principal.username}"></span> ë‹˜</h1>
                    <div class="hint">ì˜¤ëŠ˜ë„ ë”°ëœ»í•œ ì‡¼í•‘ ë˜ì„¸ìš” ğŸ˜Š</div>
                </div>
            </div>
            <div>
                <span class="pill" sec:authorize="hasRole('USER')">ROLE_USER</span>
                <span class="pill" sec:authorize="hasRole('ADMIN')">ROLE_ADMIN</span>

                <a href="/cart" class="cart-link" aria-label="ì¥ë°”êµ¬ë‹ˆ" sec:authorize="hasRole('USER')">
                    <img src="/images/cart.png" alt="ì¥ë°”êµ¬ë‹ˆ ì•„ì´ì½˜" width="24" height="24">
                    <span id="cartBadge" class="cartbadge" aria-live="polite">0</span>
                </a>
            </div>
        </header>

        <!-- íƒ­ -->
        <nav class="tabs" id="tabs">
            <button class="tab active" data-target="products">ìƒí’ˆ</button>
            <button class="tab" data-target="orders">ë‚´ ì£¼ë¬¸</button>
            <button class="tab" data-target="inventory" sec:authorize="hasRole('ADMIN')">ì¬ê³ (ê´€ë¦¬ì)</button>
        </nav>

        <!-- ìƒí’ˆ ì„¹ì…˜ -->
        <section id="products" class="section active">
            <div class="toolbar">
                <input class="input" placeholder="ìƒí’ˆ ê²€ìƒ‰..." id="searchInput" oninput="filterProducts()" />
                <!-- ë¡œê·¸ì•„ì›ƒ: POST ê¶Œì¥ -->
                <form th:action="@{/logout}" method="post" style="margin:0;">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button class="btn muted" type="submit">ë¡œê·¸ì•„ì›ƒ</button>
                </form>
            </div>

            <div class="grid" id="productGrid">
                <article class="product" th:each="p : ${products}">
                    <h3 th:text="${p.name}">í—ˆë‹ˆ ë¼ë–¼</h3>
                    <div class="price">
                        <span th:text="${#numbers.formatInteger(p.price,3,'COMMA')}" name="price">6,500</span>ì›
                    </div>

                    <form th:action="@{/orders}" method="post" class="product-actions">
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                        <!-- ë‹¨ì¼ í’ˆëª© ì¦‰ì‹œ êµ¬ë§¤ -->
                        <input type="hidden" name="productId" th:value="${p.id}" />

                        <div class="qty">
                            <label class="hint" th:for="|qty-${p.id}|">ìˆ˜ëŸ‰</label>
                            <input th:id="|qty-${p.id}|" class="input" type="number" name="qty" min="1" value="1" />
                        </div>

                        <button class="btn" type="submit">ë°”ë¡œ êµ¬ë§¤</button>
                        <button class="btn muted" type="button" th:onclick="|addToCart(${p.id})|">ì¥ë°”êµ¬ë‹ˆ</button>
                    </form>
                </article>
            </div>
        </section>

        <!-- ë‚´ ì£¼ë¬¸ ì„¹ì…˜ -->
        <section id="orders" class="section">
            <div style="display:flex; align-items:center; justify-content:space-between; margin:6px 2px 12px;">
                <div class="hint">ìµœê·¼ ì£¼ë¬¸ ë‚´ì—­ì…ë‹ˆë‹¤.</div>

                <div class="toolbar">
                    <form th:action="@{/orders/me}" th:object="${searchOption}" method="get" class="form-inline">
                        <input class="input" id="productName" th:field="*{productName}" placeholder="ìƒí’ˆ ê²€ìƒ‰..." />

                        <select id="orderStatus" th:field="*{orderStatus}" class="form-control">
                            <option value="">ì£¼ë¬¸ìƒíƒœ</option>
                            <option th:each="status : ${T(com.jhg.hgpage.domain.enums.OrderStatus).values()}"
                                    th:value="${status}"
                                    th:text="${status}">option</option>
                        </select>

                        <button class="btn muted" type="submit">ìƒˆë¡œê³ ì¹¨</button>
                    </form>
                </div>
            </div>

            <div style="overflow:auto;">
                <table>
                    <thead>
                    <tr>
                        <th>ì£¼ë¬¸ë²ˆí˜¸</th>
                        <th>ìƒíƒœ</th>
                        <th>ì£¼ë¬¸ê¸ˆì•¡</th>
                        <th>ì£¼ë¬¸ì¼ì‹œ</th>
                        <th style="width:140px">ë”ë³´ê¸°</th>
                    </tr>
                    </thead>
                    <tbody>
                    <!-- ì„œë²„ì—ì„œ orders: List<MyOrderSummary> -->
                    <tr th:each="o : ${orders}">
                        <td th:text="${o.id}">101</td>
                        <td th:text="${o.status}">PAID</td>
                        <td><span th:text="${#numbers.formatInteger(o.totalAmount,3,'COMMA')}">23,000</span>ì›</td>
                        <td th:text="${#temporals.format(o.createdAt,'yyyy-MM-dd HH:mm')}">2025-08-26 10:22</td>
                        <td>
                            <a class="btn muted" th:href="@{|/orders/${o.id}|}">ìƒì„¸</a>
                        </td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(orders)}">
                        <td colspan="5" class="hint">í‘œì‹œí•  ì£¼ë¬¸ì´ ì—†ìŠµë‹ˆë‹¤.</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- ì¬ê³ (ê´€ë¦¬ì) ì„¹ì…˜ -->
        <section id="inventory" class="section" sec:authorize="hasRole('ADMIN')">
            <div style="display:flex; align-items:center; justify-content:space-between; margin:6px 2px 12px;">
                <div class="hint">ì¬ê³  ì¡°ì • ë° ì…ê³  ì²˜ë¦¬</div>
                <a class="btn muted" th:href="@{/admin/inventory}">ì¬ê³ ì¡°íšŒ</a>
            </div>

            <!-- ì¬ê³  ì¡°ì • -->
            <div class="card" style="padding:14px; margin-bottom:12px;">
                <h2 style="margin:4px 0 12px; font-size:18px;">ì¬ê³  ìˆ˜ë™ ì¡°ì •</h2>
                <form th:action="@{/admin/inventory/adjust}" method="post" style="display:grid; grid-template-columns:2fr 1fr 1fr auto; gap:10px; align-items:end;">
                    <!--                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
                    <div>
                        <label class="hint">ìƒí’ˆ</label>
                        <select name="productId" class="input">
                            <option th:each="p : ${products}" th:value="${p.id}" th:text="${p.name}">ìƒí’ˆ</option>
                        </select>
                    </div>
                    <div>
                        <label class="hint">ì¦ê° ìˆ˜ëŸ‰(+/-)</label>
                        <input class="input" type="number" name="delta" step="1" value="1" />
                    </div>
                    <div>
                        <label class="hint">ì‚¬ìœ </label>
                        <input class="input" type="text" name="reason" placeholder="ì •ê¸°ì¡°ì‚¬ / íŒŒì† / ì¡°ì • ë“±" />
                    </div>
                    <button class="btn" type="submit">ì¡°ì •</button>
                </form>
            </div>

            <!-- ë°œì£¼ ìƒì„± -->
            <div class="card" style="padding:14px; margin-bottom:12px;">
                <h2 style="margin:4px 0 12px; font-size:18px;">ë°œì£¼ ìƒì„±</h2>
                <form th:action="@{/admin/purchase-orders}" method="post" style="display:grid; grid-template-columns:2fr 1fr 1fr auto; gap:10px; align-items:end;">
                    <!--                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
                    <div>
                        <label class="hint">ìƒí’ˆ</label>
                        <select name="items[0].productId" class="input">
                            <option th:each="p : ${products}" th:value="${p.id}" th:text="${p.name}">ìƒí’ˆ</option>
                        </select>
                    </div>
                    <div>
                        <label class="hint">ìˆ˜ëŸ‰</label>
                        <input class="input" type="number" name="items[0].quantity" min="1" value="10" />
                    </div>
                    <div>
                        <label class="hint">ë©”ëª¨</label>
                        <input class="input" type="text" name="memo" placeholder="ê¸´ê¸‰ ë°œì£¼ ë“±" />
                    </div>
                    <button class="btn" type="submit">ë°œì£¼ ìƒì„±</button>
                </form>
            </div>

            <!-- ì…ê³  ì²˜ë¦¬ -->
            <div class="card" style="padding:14px;">
                <h2 style="margin:4px 0 12px; font-size:18px;">ì…ê³  ì²˜ë¦¬</h2>
                <form th:action="@{/admin/purchase-orders/{id}/receive(id=${poId})}" method="post" style="display:grid; grid-template-columns:2fr auto; gap:10px; align-items:end;">
                    <!--                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />-->
                    <div>
                        <label class="hint">PO ë²ˆí˜¸</label>
                        <input class="input" type="number" name="poId" placeholder="ì˜ˆ: 1001" />
                    </div>
                    <button class="btn" type="submit">ì…ê³ </button>
                </form>
                <div class="hint" style="margin-top:8px;">â€» ë‹¤í’ˆëª© PO ì²˜ë¦¬ë¼ë©´ ì„œë²„ì—ì„œ í•´ë‹¹ POì˜ ëª¨ë“  í•­ëª©ì„ ì…ê³  ì²˜ë¦¬í•˜ë„ë¡ êµ¬í˜„.</div>
            </div>
        </section>
    </div>
</div>

<script>
    const badge = document.getElementById('cartBadge');
    const csrf = { token: document.querySelector('meta[name="_csrf"]')?.content,
                   header: document.querySelector('meta[name="_csrf_header"]')?.content };

    function bumpBadge() {
      if (!badge) return;
      badge.classList.remove('bump');
      void badge.offsetWidth;
      badge.classList.add('bump');
    }

    function setCartCount(n) {
      if (!badge) return;
      badge.textContent = n;
      bumpBadge();
      try { localStorage.setItem('cartCount', String(n)); } catch(e){}
    }

    // ì´ˆê¸°í™”: í˜ì´ì§€ ë¡œë“œ ì‹œ í˜„ì¬ ê°œìˆ˜ ê°€ì ¸ì˜¤ê¸°
    (async function initCartCount(){
      try {
        const r = await fetch('/api/cart/count', { credentials: 'include' });
        if (r.ok) {
          const { count } = await r.json();
          setCartCount(count ?? 0);
        }
      } catch (e) { /* ë¬´ì‹œ */ }
    })();

    // ë‹¤ë¥¸ íƒ­ì—ì„œ ë³€ê²½ë˜ë©´ ë™ê¸°í™”(ì„ íƒ)
    window.addEventListener('storage', (e) => {
      if (e.key === 'cartCount' && e.newValue != null) {
        badge.textContent = e.newValue;
        bumpBadge();
      }
    });

    // ë‹´ê¸° ë²„íŠ¼ì—ì„œ í˜¸ì¶œí•  í•¨ìˆ˜(í”„ë¡œí† íƒ€ì…ìš©)
    let addLock = false;
    async function addToCart(productId) {
      if (addLock) return;           // ë”ë¸”í´ë¦­ ë°©ì§€
      addLock = true;

      const qtyInput = document.getElementById(`qty-${productId}`);
      const qty = Math.max(1, parseInt(qtyInput?.value ?? '1', 10));

      // Optimistic UI: ì¼ë‹¨ +1
      const before = Number(badge.textContent || '0');
      setCartCount(before + qty);

      try {
        const body = JSON.stringify({ productId, qty });
        const opt = {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include'
        };

        if (csrf.token && csrf.header) opt.headers[csrf.header] = csrf.token;
        opt.body = body;

        const r = await fetch('/api/cart/items', opt);
        if (!r.ok) throw new Error('failed');
        const data = await r.json();              // {count: ì¥ë°”êµ¬ë‹ˆ ì „ì²´ ìˆ˜ëŸ‰}
        if (typeof data.count === 'number') setCartCount(data.count);

        alert('ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ì–´ìš”!');
      } catch (e) {
        // ì‹¤íŒ¨ ì‹œ ë¡¤ë°±
        setCartCount(before);
        alert('ë‹´ê¸°ì— ì‹¤íŒ¨í–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.');
      } finally {
        addLock = false;
      }
    }

    // íƒ­ ì „í™˜
    (function(){
        const tabs = document.getElementById('tabs');
        const sections = document.querySelectorAll('.section');
        tabs?.addEventListener('click', (e) => {
            const btn = e.target.closest('.tab'); if(!btn) return;
            document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
            btn.classList.add('active');
            const id = btn.dataset.target;
            sections.forEach(s => s.classList.toggle('active', s.id === id));
        });
    })();

    // ìƒí’ˆ ê²€ìƒ‰ í•„í„°(í”„ëŸ°íŠ¸ ê°„ì´)
    function filterProducts() {
        const q = (document.getElementById('searchInput')?.value || '').toLowerCase();
        document.querySelectorAll('#productGrid .product').forEach(card => {
            const name = (card.querySelector('h3')?.textContent || '').toLowerCase();
            card.style.display = name.includes(q) ? '' : 'none';
        });
    }

//# sourceURL=/html/main.js
</script>
</body>
</html>